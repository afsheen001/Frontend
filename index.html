<!-- Main frontend layout for DreamCraft Art & Design School -->

<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Character encoding -->
  <meta charset="UTF-8">

  <!-- Responsive layout for mobile & desktop -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Website title -->
  <title>DreamCraft Art & Design School</title>

  <!-- Vue.js CDN (Vue 2) -->
  <!-- Allows us to use directives like v-model, v-for, v-if -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- External CSS -->
  <link rel="stylesheet" href="style.css">
</head>

<body>

<!-- Root Vue app container -->
<div id="app">

  <!--  HEADER -->
  <header>
    <!-- Website logo / title -->
    <h1>Dream Craft school </h1>

    <!-- Cart button (only visible when items exist in cart) -->
    <button
      class="cart-btn"
      v-if="cart.length"
      @click="toggleCart"
    >
      Cart ({{ cart.length }})
    </button>
  </header>

  <!--SEARCH & SORT CONTROLS  -->
  <div class="controls">

    <!-- Search input -->
    <input
      v-model="searchTerm"
      placeholder="Search classes..."
    >

    <!-- Dropdown to select sorting attribute -->
    <select v-model="sortBy">
      <option value="">Sort by</option>
      <option value="subject">Subject</option>
      <option value="location">Location</option>
      <option value="price">Price</option>
      <option value="seats">Seats</option>
    </select>

    <!-- Toggle sorting order button -->
    <button @click="toggleSort">
      {{ sortOrder === 'asc' ? '↑ Ascending' : '↓ Descending' }}
    </button>
  </div>

  <!-- CLASS CARDS GRID -->
  <section class="container">

    <!-- Loop through filtered & sorted lessons -->
    <div
      v-for="cls in filteredClasses"
      :key="cls._id"
      class="class-card"
      @click="openClassInfo(cls)"
    >

      <!-- Lesson image -->
      <img :src="cls.image" :alt="cls.subject">

      <!-- Lesson title with highlighted search text -->
      <h2 v-html="highlightText(cls.subject)"></h2>

      <!-- Lesson location -->
      <p>
        <strong>Location:</strong>
        <span v-html="highlightText(cls.location)"></span>
      </p>

      <!-- Remaining seats -->
      <p class="seats">
        <strong>Seats:</strong> {{ cls.seats }}
      </p>

      <!-- Lesson price -->
      <p>
        <strong>Price:</strong>
        <span v-html="highlightText(cls.price)"></span>
      </p>

      <!-- Book button (click propagation stopped) -->
      <button
        @click.stop="addToCart(cls)"
        :disabled="cls.seats === 0"
      >
        Book Class
      </button>
    </div>
  </section>

  <!--  CART SIDEBAR -->
  <div class="cart-sidebar" :class="{ open: showCart }">

    <!-- Cart header -->
    <div class="cart-header">
      <h2>Your Cart</h2>
      <button class="close-btn" @click="toggleCart">✖</button>
    </div>

    <!-- Cart items list -->
    <div class="cart-list">

      <!-- Message when cart is empty -->
      <p v-if="!cart.length">No classes added yet.</p>

      <!-- Loop through cart items -->
      <div
        v-for="(item, index) in cart"
        :key="index"
        class="cart-item"
      >

        <!-- Cart item image -->
        <img
          :src="item.image"
          :alt="item.subject"
          class="cart-image"
        >

        <!-- Cart item details -->
        <div>
          <p><strong>{{ item.subject }}</strong></p>
          <p>{{ item.price }}</p>
        </div>

        <!-- Remove item from cart -->
        <button @click="removeFromCart(index)">
          Remove
        </button>
      </div>
    </div>

    <!-- Checkout section -->
    <div class="checkout-area" v-if="cart.length">
      <p><strong>Total:</strong> {{ totalPrice }}</p>
      <button class="checkout-btn" @click="openCheckoutForm">
        Checkout
      </button>
    </div>
  </div>

  <!-- CHECKOUT MODAL -->
  <div v-if="showCheckoutForm" class="modal-overlay">
    <div class="modal">

      <h3>Checkout Details</h3>

      <!-- Customer name -->
      <input
        type="text"
        v-model="customer.name"
        placeholder="Full Name"
      >

      <!-- Customer email -->
      <input
        type="email"
        v-model="customer.email"
        placeholder="Email Address"
      >

      <!-- Customer phone number (numbers only) -->
      <input
        type="tel"
        v-model="customer.phone"
        placeholder="Phone Number"
        @input="validatePhoneInput"
      >

      <!-- Confirm booking -->
      <button @click="confirmCheckout">
        Confirm Booking
      </button>

      <!-- Cancel checkout -->
      <button
        class="cancel-btn"
        @click="closeCheckoutForm"
      >
        Cancel
      </button>
    </div>
  </div>

  <!-- CLASS INFO MODAL -->
  <div
    v-if="showInfoModal"
    class="modal-overlay"
    @click.self="closeClassInfo"
  >
    <div class="modal">

      <!-- Selected lesson details -->
      <h3>{{ selectedClass.subject }}</h3>
      <p><strong>About:</strong> {{ selectedClass.about }}</p>
      <p><strong>Why Study:</strong> {{ selectedClass.why }}</p>

      <!-- Close modal -->
      <button @click="closeClassInfo">
        Close
      </button>
    </div>
  </div>

  <!--- FOOTER  -->
  <footer>
    &copy; 2025 DreamCraft Art & Design School
  </footer>

</div>

<!-- Vue logic -->
<script src="app.js"></script>
</body>
</html>
