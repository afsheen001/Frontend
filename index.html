<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DreamCraft Art & Design School</title>

  <!-- Vue -->
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

  <!-- Fonts & CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>

<body>
<div id="app">

  <!-- HEADER -->
  <header>
    <h1>DreamCraft</h1>

    <!-- Cart button only if there are items -->
    <button
      class="cart-btn"
      v-if="cart.length > 0"
      @click="toggleCart">
      Cart ({{ cart.length }})
    </button>
  </header>

  <!-- SEARCH & SORT CONTROLS -->
  <div class="controls">
    <input
      v-model="searchTerm"
      placeholder="Search classes..."
    >

    <select v-model="sortBy">
      <option value="">Sort by</option>
      <option value="subject">Subject</option>
      <option value="location">Location</option>
      <option value="price">Price</option>
      <option value="seats">Seats</option>
    </select>

    <button @click="toggleSort">
      {{ sortOrder === 'asc' ? '↑ Ascending' : '↓ Descending' }}
    </button>
  </div>

  <!-- CLASS GRID -->
  <section class="container">
    <div
      v-for="cls in filteredClasses"
      :key="cls._id"
      class="class-card"
      @click="openClassInfo(cls)"
    >
      <!-- images come from frontend/images (e.g. images/drawing.jpg) -->
      <img :src="cls.image" :alt="cls.subject">

      <!-- highlight subject -->
      <h2 v-html="highlightText(cls.subject)"></h2>

      <p>
        <strong>Location:</strong>
        <span v-html="highlightText(cls.location)"></span>
      </p>

      <p class="seats">
        <strong>Seats:</strong> {{ cls.seats }}
      </p>

      <p>
        <strong>Price:</strong>
        <span v-html="highlightText(cls.price)"></span>
      </p>

      <button
        @click.stop="addToCart(cls)"
        :disabled="cls.seats === 0">
        Book Class
      </button>
    </div>
  </section>

  <!-- CART SIDEBAR -->
  <div class="cart-sidebar" :class="{ open: showCart }">
    <div class="cart-header">
      <h2>Your Cart</h2>
      <button class="close-btn" @click="toggleCart">✖</button>
    </div>

    <div class="cart-list">
      <p v-if="cart.length === 0">No classes added yet.</p>

      <div
        v-for="(item, index) in cart"
        :key="index"
        class="cart-item"
      >
        <span>{{ item.subject }} ({{ item.price }})</span>
        <button @click="removeFromCart(index)">Remove</button>
      </div>
    </div>

    <div class="checkout-area" v-if="cart.length > 0">
      <p><strong>Total:</strong> {{ totalPrice }}</p>
      <button class="checkout-btn" @click="openCheckoutForm">
        Checkout
      </button>
    </div>
  </div>

  <!-- CHECKOUT MODAL -->
  <div v-if="showCheckoutForm" class="modal-overlay">
    <div class="modal">
      <h3>Checkout Details</h3>

      <input
        type="text"
        v-model="customer.name"
        placeholder="Full Name"
      >
      <input
        type="email"
        v-model="customer.email"
        placeholder="Email Address"
      >
      <input
        type="tel"
        v-model="customer.phone"
        placeholder="Phone Number"
        @input="validatePhoneInput"
      >

      <button @click="confirmCheckout">
        Confirm Booking
      </button>
      <button class="cancel-btn" @click="closeCheckoutForm">
        Cancel
      </button>
    </div>
  </div>

  <!-- CLASS INFO MODAL -->
  <div
    v-if="showInfoModal"
    class="modal-overlay"
    @click.self="closeClassInfo"
  >
    <div class="modal">
      <h3>{{ selectedClass.subject }}</h3>
      <p><strong>About:</strong> {{ selectedClass.about }}</p>
      <p><strong>Why Study:</strong> {{ selectedClass.why }}</p>
      <button @click="closeClassInfo">Close</button>
    </div>serve .

  </div>

  <!-- FOOTER -->
  <footer>
    &copy; 2025 DreamCraft Art & Design School | All Rights Reserved
  </footer>

</div>

<!-- Vue logic -->
<script src="app.js"></script>
</body>
</html>
